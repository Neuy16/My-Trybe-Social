(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{78:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var a,r,s,c,i,o=n(1),l=n.n(o),j=n(70),d=n.n(j),u=(n(78),n(26)),b=n(6),m=n(90),O=n(92),h=n(89),p=n(93),g=n(37),x=n(91),v=(Object(x.a)(a||(a=Object(g.a)(["\n  query allUsers {\n    users {\n      _id\n      firstName\n      lastName\n      username\n      email\n      profilePicture\n      friends {\n        _id\n        firstName\n        lastName\n      }\n    }\n  }\n"]))),Object(x.a)(r||(r=Object(g.a)(["\n  query singleUser($userId: ID!) {\n    user(userId: $userId) {\n      _id\n      firstName\n      lastName\n      username\n      email\n      profilePicture\n      friends {\n        _id\n        firstName\n        lastName\n      }\n    }\n  }\n"])))),f=Object(x.a)(s||(s=Object(g.a)(["\n  query me {\n    me {\n      _id\n      firstName\n      lastName\n      username\n      email\n      profilePicture\n      friends {\n        _id\n        firstName\n        lastName\n      }\n    }\n  }\n"]))),N=n(4),w=function(){var e=Object(b.n)().userId,t=Object(p.a)(e?v:f,{variables:{userId:e}}),n=t.loading,a=t.data,r=(null===a||void 0===a?void 0:a.me)||(null===a||void 0===a?void 0:a.user)||{};return n?Object(N.jsx)("div",{children:"Loading..."}):null!==r&&void 0!==r&&r.username?void 0:Object(N.jsxs)("section",{children:[Object(N.jsxs)("div",{children:[Object(N.jsx)(u.b,{className:"btn btn-lg btn-primary m-2",to:"/Login",children:"Login"}),Object(N.jsx)("p",{children:" "}),Object(N.jsx)(u.b,{className:"btn btn-lg btn-light m-2",to:"/Register",children:"Register"})]}),Object(N.jsx)("p",{children:"You need to be logged in. Use the navigation links above to sign up or log in!"})]})},y=n(8),k=n(15),S=n(12),I=n(34),$=n(9),_=n(87),C=Object(x.a)(c||(c=Object(g.a)(["\n    mutation login($username: String!, $password: String!) {\n        login(username: $username, password: $password) {\n            token\n            user {\n                _id\n                username\n            }\n        }\n    }\n"]))),L=Object(x.a)(i||(i=Object(g.a)(["\n    mutation addUser($firstName: String!, $lastName: String!, $username: String!, $email: String!, $password: String!) {\n        addUser(firstName: $firstName, lastName: $lastName, username: $username, email: $email, password: $password){\n            token\n            user {\n                _id\n                username\n            }\n        }\n    }\n"]))),P=n(28),q=n(29),T=n(58),U=new(function(){function e(){Object(P.a)(this,e)}return Object(q.a)(e,[{key:"getUser",value:function(){return Object(T.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){return Object(T.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){var t=Object(T.a)(e);console.log(t.data),localStorage.setItem("id_token",e),window.location.assign("/me/".concat(t.data._id))}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),Y=function(e){var t=Object(o.useState)({username:"",password:""}),n=Object($.a)(t,2),a=n[0],r=n[1],s=Object(_.a)(C),c=Object($.a)(s,2),i=c[0],l=c[1],j=l.error,d=l.data,u=function(e){var t=e.target,n=t.name,s=t.value;r(Object(I.a)(Object(I.a)({},a),{},Object(S.a)({},n,s)))},b=function(){var e=Object(k.a)(Object(y.a)().mark((function e(t){var n,s;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),console.log(a),e.prev=3,e.next=6,i({variables:Object(I.a)({},a)});case 6:n=e.sent,s=n.data,U.login(s.login.token),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0);case 14:r({username:"",password:""});case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(N.jsx)("div",{className:"col-12 col-lg-10",children:Object(N.jsxs)("div",{className:"card",children:[Object(N.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Login"}),Object(N.jsxs)("div",{className:"card-body",children:[d?Object(N.jsx)("p",{children:Object(N.jsx)("div",{children:"Loading..."})}):Object(N.jsxs)("form",{onSubmit:b,children:[Object(N.jsx)("input",{placeholder:"Your username",name:"username",type:"text",value:a.username,onChange:u,required:!0}),Object(N.jsx)("input",{placeholder:"******",name:"password",type:"password",value:a.password,onChange:u,required:!0}),Object(N.jsx)("button",{className:"btn btn-block btn-info",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),j&&Object(N.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:j.message})]})]})})})},D=function(){Object(p.a)(v,{fetchPolicy:"no-cache"}).data;return Object(N.jsx)("div",{children:Object(N.jsx)("div",{})})},F=function(){var e=Object(o.useState)({firstName:"",lastName:"",username:"",email:"",password:""}),t=Object($.a)(e,2),n=t[0],a=t[1],r=Object(_.a)(L),s=Object($.a)(r,2),c=s[0],i=s[1],l=i.error,j=i.data,d=function(e){var t=e.target,r=t.name,s=t.value;a(Object(I.a)(Object(I.a)({},n),{},Object(S.a)({},r,s)))},b=function(){var e=Object(k.a)(Object(y.a)().mark((function e(t){var r,s;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),console.log(n),e.prev=3,e.next=6,c({variables:Object(I.a)({},n)});case 6:r=e.sent,s=r.data,U.login(s.addUser.token),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0);case 14:a({firstName:"",lastName:"",username:"",email:"",password:""});case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(N.jsx)("div",{className:"col-12 col-lg-10",children:Object(N.jsxs)("div",{className:"card",children:[Object(N.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Register"}),Object(N.jsxs)("div",{className:"card-body",children:[j?Object(N.jsxs)("p",{children:["Success! You may now head"," ",Object(N.jsx)(u.b,{to:"/",children:"back to Login"})]}):Object(N.jsxs)("form",{onSubmit:b,children:[Object(N.jsx)("input",{placeholder:"Your first name",name:"firstName",type:"text",value:n.firstName,onChange:d}),Object(N.jsx)("input",{placeholder:"Your last name",name:"lastName",type:"text",value:n.lastName,onChange:d}),Object(N.jsx)("input",{placeholder:"Your username",name:"username",type:"text",value:n.username,onChange:d}),Object(N.jsx)("input",{placeholder:"Your email",name:"email",type:"email",value:n.email,onChange:d}),Object(N.jsx)("input",{placeholder:"******",name:"password",type:"password",value:n.password,onChange:d}),Object(N.jsx)("button",{className:"btn btn-block btn-info",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),l&&Object(N.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:l.message})]})]})})})},B=function(){var e=Object(b.n)().userId,t=Object(p.a)(e?v:f,{variables:{userId:e}}),n=t.loading,a=t.data;return n?Object(N.jsx)("div",{children:"Loading..."}):Object(N.jsxs)("h4",{children:["welcome to your timeline ",a.user.firstName]})},E=function(){return Object(N.jsx)("div",{children:Object(N.jsx)("h2",{children:"Header"})})},R=function(){return Object(N.jsx)("footer",{children:Object(N.jsx)("h1",{children:"Footer"})})},J=new m.a({request:function(e){var t=localStorage.getItem("id_token");e.setContext({headers:{authorization:t?"Bearer ".concat(t):""}})},uri:"/graphql",cache:new O.a});var z=function(){return Object(N.jsx)(h.a,{client:J,children:Object(N.jsx)(u.a,{children:Object(N.jsxs)("div",{className:"flex-column justify-center align-center min-100-vh bg-primary",children:[Object(N.jsx)(E,{}),Object(N.jsx)("div",{className:"container",children:Object(N.jsxs)(b.c,{children:[Object(N.jsx)(b.a,{path:"/",element:Object(N.jsx)(w,{})}),Object(N.jsx)(b.a,{path:"/register",element:Object(N.jsx)(F,{})}),Object(N.jsx)(b.a,{path:"/login",element:Object(N.jsx)(Y,{})}),Object(N.jsx)(b.a,{path:"/profile",element:Object(N.jsx)(D,{})}),Object(N.jsx)(b.a,{path:"/me/:userId",element:Object(N.jsx)(B,{})})]})}),Object(N.jsx)(R,{})]})})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,95)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};d.a.render(Object(N.jsx)(l.a.StrictMode,{children:Object(N.jsx)(z,{})}),document.getElementById("root")),H()}},[[81,1,2]]]);
//# sourceMappingURL=main.1e40c3dd.chunk.js.map